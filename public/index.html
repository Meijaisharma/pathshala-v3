<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PathshalaX - Lecture Player</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .active-tab { border-bottom: 3px solid #6366f1; color: #6366f1; }
    </style>
</head>
<body class="bg-gray-50">

    <div class="bg-black w-full aspect-video flex items-center justify-center relative">
        <video id="mainPlayer" controls class="w-full h-full max-h-[70vh]" poster="https://via.placeholder.com/800x450?text=PathshalaX+Video">
            <source id="videoSource" src="" type="video/mp4">
        </video>
    </div>

    <div class="p-4 bg-white shadow-sm">
        <h1 id="lectureTitle" class="text-xl font-bold text-gray-800">हिंदी साहित्य (कक्षा)</h1>
        <p class="text-gray-500 text-sm">Hindi Sahitya • Jai Sir</p>
    </div>

    <div class="flex justify-around bg-white border-t border-b text-gray-500 font-medium">
        <button onclick="showTab('details')" id="tab-details" class="py-3 px-6 active-tab"><i class="fas fa-info-circle mr-2"></i>Details</button>
        <button onclick="showTab('notes')" id="tab-notes" class="py-3 px-6"><i class="fas fa-file-alt mr-2"></i>Notes</button>
        <button onclick="showTab('chat')" id="tab-chat" class="py-3 px-6"><i class="fas fa-comment-dots mr-2"></i>Chat</button>
    </div>

    <div id="content-details" class="p-6">
        <h2 class="text-lg font-semibold mb-4 text-gray-700">Lecture Details</h2>
        <div class="bg-blue-50 p-4 rounded-xl border border-blue-100 italic text-gray-600" id="metaText">
            विवरण लोड हो रहा है...
        </div>
    </div>

    <div id="content-notes" class="p-4 hidden space-y-4">
        <div class="flex items-center justify-between p-4 bg-white rounded-2xl border-l-4 border-red-500 shadow-sm">
            <div class="flex items-center">
                <div class="bg-red-50 p-3 rounded-full mr-4"><i class="fas fa-file-pdf text-red-500 text-xl"></i></div>
                <div>
                    <h3 class="font-bold text-gray-800">Class Note 1</h3>
                    <p class="text-xs text-gray-400">PDF Document</p>
                </div>
            </div>
            <div class="flex gap-2">
                <button class="px-4 py-1 border border-indigo-600 text-indigo-600 rounded-lg text-sm font-semibold">Open</button>
                <button class="px-4 py-1 bg-gray-800 text-white rounded-lg text-sm font-semibold">Download</button>
            </div>
        </div>
    </div>

    <script>
        const videoId = "1"; // Yahan se video ID badli ja sakti hai
        const baseUrl = window.location.origin;

        // Load Meta & Video
        async function loadLecture() {
            // 1. Set Video Source
            document.getElementById('videoSource').src = `${baseUrl}/api/video/${videoId}`;
            document.getElementById('mainPlayer').load();

            // 2. Fetch Meta Details
            try {
                const res = await fetch(`${baseUrl}/api/meta/${videoId}`);
                const data = await res.json();
                document.getElementById('metaText').innerText = data.text;
                document.getElementById('lectureTitle').innerText = data.text.split('\n')[0];
            } catch (e) {
                document.getElementById('metaText').innerText = "विवरण उपलब्ध नहीं है।";
            }
        }

        function showTab(tabName) {
            ['details', 'notes', 'chat'].forEach(t => {
                document.getElementById(`content-${t}`).classList.add('hidden');
                document.getElementById(`tab-${t}`).classList.remove('active-tab');
            });
            document.getElementById(`content-${tabName}`).classList.remove('hidden');
            document.getElementById(`tab-${tabName}`).classList.add('active-tab');
        }

        loadLecture();
    </script>
</body>
</html>

